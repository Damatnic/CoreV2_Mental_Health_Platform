# ================================================================
# STAGING ENVIRONMENT CONFIGURATION
# Astral Core Mental Health Platform v2.0
# ================================================================
# 
# This configuration is for STAGING/TEST deployment
# Mirror production settings with test API keys
#
# Last Updated: 2025-08-30
# Configured by Agent Delta - Complete Environment Setup
# ================================================================

# ================================
# ENVIRONMENT SETTINGS
# ================================
NODE_ENV=staging
DEPLOYMENT_ENV=staging
APP_VERSION=2.0.0-staging

# ================================
# APPLICATION URLS
# ================================
VITE_APP_URL=https://staging.astralcore.health
VITE_API_BASE_URL=https://api-staging.astralcore.health/v2
VITE_WEBSOCKET_URL=wss://ws-staging.astralcore.health
VITE_CDN_URL=https://cdn-staging.astralcore.health

# ================================
# AI SERVICES - TEST KEYS
# ================================

# OpenAI GPT-4 (Test Key)
VITE_OPENAI_API_KEY=sk-test-XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX
VITE_OPENAI_ORG_ID=org-test-XXXXXXXXXXXXXXXXXX
VITE_OPENAI_MODEL=gpt-4-turbo
VITE_OPENAI_CRISIS_MODEL=gpt-4-turbo
VITE_OPENAI_MAX_TOKENS=1000
VITE_OPENAI_TEMPERATURE=0.7
VITE_OPENAI_TIMEOUT_MS=10000
VITE_OPENAI_RETRY_ATTEMPTS=2

# Anthropic Claude (Test Key)
VITE_ANTHROPIC_API_KEY=sk-ant-test-XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX
VITE_ANTHROPIC_MODEL=claude-3-opus-20240229
VITE_ANTHROPIC_MAX_TOKENS=1000
VITE_ANTHROPIC_TEMPERATURE=0.6
VITE_ANTHROPIC_TIMEOUT_MS=10000

# Google Gemini (Test Key)
VITE_GOOGLE_GEMINI_API_KEY=AIzaSyTEST-XXXXXXXXXXXXXXXXXXXXXXXXXXXX
VITE_GEMINI_MODEL=gemini-pro
VITE_GEMINI_SAFETY_THRESHOLD=BLOCK_NONE
VITE_GEMINI_MAX_TOKENS=1000

# Hugging Face (Test Key)
VITE_HUGGINGFACE_API_KEY=hf_test_XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX
VITE_HF_FALLBACK_MODEL=microsoft/DialoGPT-medium

# ================================
# CRISIS SERVICES - TEST MODE
# ================================

# 988 Test Environment
VITE_988_API_ENDPOINT=https://api-test.988lifeline.org/v2
VITE_988_API_KEY=988-test-XXXXXXXXXXXXXXXXXXXXXXXXXX
VITE_988_WEBHOOK_SECRET=webhook-test-XXXXXXXXXXXXXXXXXXXX
VITE_988_AUTO_CONNECT_ENABLED=false  # Disabled in staging
VITE_988_CONSENT_REQUIRED=true

# Crisis Text Line Test
VITE_CRISIS_TEXT_API_KEY=ctl-test-XXXXXXXXXXXXXXXXXXXXXXXXXX
VITE_CRISIS_TEXT_NUMBER=741741
VITE_CRISIS_TEXT_WEBHOOK_URL=https://api-staging.astralcore.health/webhooks/crisis-text

# Emergency Services Test
VITE_RAPIDSOS_API_KEY=rapidsos-test-XXXXXXXXXXXXXXXXXXXXXXXXXX
VITE_EMERGENCY_DISPATCH_URL=https://api-test.rapidsos.com/v1/emergency
VITE_EMERGENCY_WEBSOCKET_URL=wss://dispatch-test.rapidsos.com/ws
VITE_911_AUTO_DIAL_THRESHOLD=0.99  # Higher threshold for staging
VITE_911_CONSENT_OVERRIDE=false  # Require consent in staging

# Mental Health Services Test APIs
VITE_SAMHSA_API_KEY=samhsa-test-XXXXXXXXXXXXXXXXXXXXXXXXXX
VITE_NAMI_API_KEY=nami-test-XXXXXXXXXXXXXXXXXXXXXXXXXX

# ================================
# GOOGLE SERVICES - TEST
# ================================
VITE_GOOGLE_PLACES_API_KEY=AIzaSyTEST-PLACES-XXXXXXXXXXXXXXXXXXXX
VITE_GOOGLE_GEOCODING_API_KEY=AIzaSyTEST-GEO-XXXXXXXXXXXXXXXXXXXXXXX
VITE_GOOGLE_MAPS_API_KEY=AIzaSyTEST-MAPS-XXXXXXXXXXXXXXXXXXXXXX

# ================================
# AUTHENTICATION & SECURITY
# ================================

# JWT Configuration
JWT_SECRET=staging-jwt-secret-minimum-64-characters-XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX
JWT_ALGORITHM=HS256
JWT_EXPIRES_IN=30m
JWT_REFRESH_EXPIRES_IN=14d
JWT_ISSUER=https://api-staging.astralcore.health
JWT_AUDIENCE=https://staging.astralcore.health

# Session Configuration
SESSION_SECRET=staging-session-secret-minimum-64-characters-XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX
SESSION_NAME=astral.staging.sid
SESSION_MAX_AGE=86400000
SESSION_SECURE=true
SESSION_SAME_SITE=lax

# OAuth Test Providers
VITE_GOOGLE_CLIENT_ID=STAGING-XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX.apps.googleusercontent.com
GOOGLE_CLIENT_SECRET=GOCSPX-STAGING-XXXXXXXXXXXXXXXXXXXXXXXXXX
VITE_APPLE_CLIENT_ID=com.astralcore.health.staging.signin
APPLE_TEAM_ID=STAGING-XXX
APPLE_KEY_ID=STAGING-XXX
APPLE_PRIVATE_KEY_PATH=/secure/keys/apple-signin-staging.p8

# Encryption Keys
ENCRYPTION_KEY=staging-encryption-key-32-chars!!
ENCRYPTION_IV=staging-16-char!
CRYPTO_ALGORITHM=aes-256-gcm
ENCRYPTION_SALT=staging-salt-minimum-32-characters-XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX

# ================================
# DATABASE CONFIGURATION
# ================================

# Staging Database
DATABASE_URL=postgresql://astral_staging:XXXXXXXXXXXXXXXXXX@staging-db.astralcore.health:5432/astralcore_staging?ssl=require
DATABASE_SSL=true
DATABASE_POOL_MIN=5
DATABASE_POOL_MAX=20
DATABASE_IDLE_TIMEOUT=30000
DATABASE_CONNECTION_TIMEOUT=10000

# Redis Cache (Staging)
REDIS_URL=redis://staging-redis.astralcore.health:6379
REDIS_PASSWORD=redis-staging-password-XXXXXXXXXXXXXXXXXXXXXXXXXX
REDIS_TLS=false
REDIS_DB=1
REDIS_KEY_PREFIX=astral:staging:

# ================================
# MONITORING & OBSERVABILITY
# ================================

# Sentry (Staging Project)
SENTRY_DSN=https://STAGING-XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX@o4504504504504504.ingest.sentry.io/4504504504504505
SENTRY_ENVIRONMENT=staging
SENTRY_TRACES_SAMPLE_RATE=0.5
SENTRY_PROFILES_SAMPLE_RATE=0.5
SENTRY_REPLAY_SESSION_SAMPLE_RATE=0.5
SENTRY_REPLAY_ON_ERROR_SAMPLE_RATE=1.0

# DataDog APM (Staging)
DATADOG_API_KEY=dd-staging-api-key-XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX
DATADOG_APP_KEY=dd-staging-app-key-XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX
DATADOG_SITE=datadoghq.com
DATADOG_ENV=staging
DATADOG_SERVICE=astralcore-mental-health-staging

# Logging
LOG_LEVEL=debug
LOG_FORMAT=json
LOG_DESTINATION=console,datadog
AUDIT_LOG_ENABLED=true
AUDIT_LOG_RETENTION_DAYS=90

# ================================
# COMMUNICATION SERVICES - TEST
# ================================

# Email (SendGrid Test)
SENDGRID_API_KEY=SG.STAGING-XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX
EMAIL_FROM=noreply@staging.astralcore.health
EMAIL_REPLY_TO=support@staging.astralcore.health
EMAIL_VERIFICATION_URL=https://staging.astralcore.health/verify-email
EMAIL_RESET_PASSWORD_URL=https://staging.astralcore.health/reset-password

# SMS (Twilio Test)
TWILIO_ACCOUNT_SID=AC-STAGING-XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX
TWILIO_AUTH_TOKEN=STAGING-XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX
TWILIO_PHONE_NUMBER=+15005550006  # Twilio test number
TWILIO_MESSAGING_SERVICE_SID=MG-STAGING-XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX

# Push Notifications (Test)
VAPID_PUBLIC_KEY=BIP-STAGING-XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX
VAPID_PRIVATE_KEY=STAGING-XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX
VAPID_SUBJECT=mailto:admin@staging.astralcore.health

# WebRTC (Staging)
VITE_WEBRTC_STUN_SERVER=stun:stun-staging.astralcore.health:3478
VITE_WEBRTC_TURN_SERVER=turn:turn-staging.astralcore.health:3478
VITE_WEBRTC_TURN_USERNAME=astral-staging
VITE_WEBRTC_TURN_PASSWORD=turn-staging-password-XXXXXXXXXXXXXXXXXX

# ================================
# COMPLIANCE & SECURITY
# ================================

# HIPAA Compliance
HIPAA_AUDIT_ENABLED=true
HIPAA_ENCRYPTION_REQUIRED=true
HIPAA_DATA_RETENTION_DAYS=90  # Shorter for staging
HIPAA_ACCESS_LOG_ENABLED=true
HIPAA_BREACH_NOTIFICATION_EMAIL=compliance-staging@astralcore.health

# Security Headers
SECURITY_HSTS_ENABLED=true
SECURITY_HSTS_MAX_AGE=86400
SECURITY_CSP_ENABLED=true
SECURITY_CSP_REPORT_URI=https://api-staging.astralcore.health/csp-report

# Rate Limiting (More relaxed for testing)
RATE_LIMIT_WINDOW_MS=60000
RATE_LIMIT_MAX_REQUESTS=1000
RATE_LIMIT_AUTH_MAX=50
RATE_LIMIT_CRISIS_MAX=10000
RATE_LIMIT_SKIP_SUCCESSFUL_REQUESTS=false
RATE_LIMIT_SKIP_FAILED_REQUESTS=false

# CORS Configuration
CORS_ORIGINS=https://staging.astralcore.health,http://localhost:5173,http://localhost:3000
CORS_CREDENTIALS=true
CORS_MAX_AGE=3600

# ================================
# FEATURE FLAGS - ALL ENABLED FOR TESTING
# ================================
ENABLE_2FA=true
ENABLE_OAUTH=true
ENABLE_ANONYMOUS_AUTH=true
ENABLE_BIOMETRIC_AUTH=true
ENABLE_AI_CRISIS_DETECTION=true
ENABLE_988_INTEGRATION=true
ENABLE_911_INTEGRATION=true
ENABLE_CRISIS_TEXT=true
ENABLE_WEBRTC_CALLING=true
ENABLE_LOCATION_SERVICES=true
ENABLE_PUSH_NOTIFICATIONS=true
ENABLE_SMS_NOTIFICATIONS=true
ENABLE_EMAIL_NOTIFICATIONS=true
ENABLE_THERAPY_MATCHING=true
ENABLE_PEER_SUPPORT=true
ENABLE_TELETHERAPY=true
ENABLE_MEDICATION_TRACKING=true
ENABLE_MOOD_TRACKING=true
ENABLE_JOURNAL=true
ENABLE_SAFETY_PLAN=true
ENABLE_RESOURCE_LIBRARY=true
ENABLE_FORUM=true
ENABLE_CHAT=true
ENABLE_VIDEO_LIBRARY=true
ENABLE_MINDFULNESS=true
ENABLE_BREATHING_EXERCISES=true
ENABLE_SLEEP_TRACKING=true
ENABLE_SYMPTOM_TRACKING=true
ENABLE_GOAL_SETTING=true
ENABLE_PROGRESS_TRACKING=true
ENABLE_CERTIFICATES=true
ENABLE_GAMIFICATION=true
ENABLE_ACHIEVEMENTS=true
ENABLE_MULTILINGUAL=true
ENABLE_CULTURAL_ADAPTATION=true
ENABLE_ADMIN_DASHBOARD=true
ENABLE_ANALYTICS=true
ENABLE_A_B_TESTING=true
ENABLE_MAINTENANCE_MODE=false
ENABLE_DEBUG_MODE=true  # Enable debug mode in staging

# ================================
# CRISIS THRESHOLDS & SETTINGS
# ================================
VITE_CRISIS_AUTO_DIAL_THRESHOLD=0.95  # Higher for staging
VITE_EMERGENCY_ESCALATION_THRESHOLD=0.98  # Higher for staging
VITE_MONITORING_ALERT_THRESHOLD=0.60
VITE_AI_CONFIDENCE_THRESHOLD=0.70
VITE_HUMAN_REVIEW_THRESHOLD=0.50
VITE_AUTO_ESCALATION_ENABLED=false  # Disabled in staging
VITE_REQUIRE_CONSENT_FOR_988=true
VITE_REQUIRE_CONSENT_FOR_911=true  # Always require in staging
VITE_REQUIRE_CONSENT_FOR_LOCATION=true

# Fallback Emergency Services
VITE_FALLBACK_CRISIS_NUMBER=1-800-273-8255
VITE_FALLBACK_TEXT_NUMBER=741741
VITE_FALLBACK_EMERGENCY_NUMBER=911
VITE_FALLBACK_INTERNATIONAL_NUMBER=112

# ================================
# PERFORMANCE & OPTIMIZATION
# ================================
CDN_ENABLED=true
CDN_URL=https://cdn-staging.astralcore.health
IMAGE_OPTIMIZATION=true
LAZY_LOADING=true
CODE_SPLITTING=true
TREE_SHAKING=true
MINIFICATION=false  # Disabled for debugging
SOURCE_MAPS=true  # Enabled for debugging
SERVICE_WORKER_ENABLED=true
PWA_ENABLED=true
CACHE_STRATEGY=network-first
CACHE_MAX_AGE=60  # Short cache for testing

# ================================
# BACKUP & RECOVERY
# ================================
BACKUP_ENABLED=true
BACKUP_SCHEDULE=0 4 * * *  # Daily at 4 AM
BACKUP_RETENTION_DAYS=7
BACKUP_S3_BUCKET=astralcore-backups-staging
BACKUP_ENCRYPTION=true
DISASTER_RECOVERY_RTO=8
DISASTER_RECOVERY_RPO=4

# ================================
# DEPLOYMENT & CI/CD
# ================================
DEPLOYMENT_STRATEGY=rolling
ROLLBACK_ON_ERROR=true
HEALTH_CHECK_PATH=/health
READINESS_CHECK_PATH=/ready
LIVENESS_CHECK_PATH=/alive
STARTUP_PROBE_DELAY=15
GRACEFUL_SHUTDOWN_TIMEOUT=15000
AUTO_SCALING_ENABLED=false
MIN_INSTANCES=1
MAX_INSTANCES=3
TARGET_CPU_UTILIZATION=80
TARGET_MEMORY_UTILIZATION=85

# ================================
# TEST DATA & MOCKING
# ================================
USE_TEST_DATA=true
MOCK_CRISIS_SERVICES=true
MOCK_AI_RESPONSES=false  # Use real AI in staging
TEST_USER_EMAIL=testuser@staging.astralcore.health
TEST_USER_PASSWORD=TestUser123!Staging
TEST_THERAPIST_EMAIL=therapist@staging.astralcore.health
TEST_THERAPIST_PASSWORD=Therapist123!Staging
TEST_ADMIN_EMAIL=admin@staging.astralcore.health
TEST_ADMIN_PASSWORD=Admin123!Staging

# ================================
# END OF STAGING CONFIGURATION
# ================================